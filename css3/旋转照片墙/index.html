<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>旋转照片墙</title>
    <style>
        #container{
            width:100%;
            height:100%;
            background:url(img/25.jpg);
            position:relative;
        }
        body,html{
            width:100%;
            height:100%;
        }
        #container .img{
            width:125px;
            height:125px;
            border:5px solid #fff;
            box-shadow:2px 2px 2px 2px rgba(0,0,0,0.5);
            position:absolute;
            top:-500px;
            left:-500px;
            transition:all 1s ease;
            cursor:pointer;
        }
        .img{
            background-size: auto;
        }
        #container .img span{
            width:100%;
            height:100%;
            opacity:0;
            display:block;
        }
    </style>
</head>
<body>
    <div id="container"></div>

<script>
    var oContainer = document.getElementById('container');
    var aImg = null;
    const row = 4,col =6,num = row * col;
    var count = 0;
    for(let i=0;i<num;i++){
        let oThumbsImg = new Image();
        oThumbsImg.onload = function () {
            count++;
            if (count == num * 2) {
                loadSuccess();
            }
        };
        oThumbsImg.src = 'img/' + (i + 1) + '.jpg';

        let oBigImg = new Image();
        oBigImg.onload = function () {
            count++;
            if (count == num * 2) {
                loadSuccess();
            }
        };
        oBigImg.src = 'img/' + (i + 1) + '.jpg';
    }

    function loadSuccess(){
        for(let i = 0;i<row;i++){
            for(let j = 0;j<col;j++){
                let oDiv = document.createElement('div');
                oDiv.style.background = 'url(img/'+(i * row + j +1)+'.jpg) no-repeat';
                oDiv.className = 'img';
                oDiv.pos = {
                    x:j,
                    y:i
                };
                oDiv.innerHtml = '<span></span>';
                oContainer.appendChild(oDiv);
            }
        }

        aImg = oContainer.getElementsByTagName('div');
        let colGap = (oContainer.offsetWidth - aImg[0].offsetWidth * col) / (col + 1);
        let rowGap = (oContainer.offsetHeight - aImg[0].offsetHeight * row) / (row + 1);


        for(let i = 0;i<num;i++){
            aImg[i].style.transform = 'rotate('+Math.floor(Math.random()*40-20) +'deg)';
            aImg[i].style.top = (rowGap + aImg[0].offsetHeight) * aImg[i].pos.y + rowGap + 'px';
            aImg[i].style.left = (colGap + aImg[0].offsetWidth) * aImg[i].pos.x + colGap + 'px';

            let bFlag = true;

            oContainer.onclick = function(e){
                if(e.currentTarget != e.target){
                    if(bFlag){
                        console.log('要合并');
                    }else{
                        console.log('要散开');
                    }
                }
            }
        }
    }
</script>
</body>
</html>